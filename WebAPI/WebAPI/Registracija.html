<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <link rel="stylesheet" href="Content/bootstrap.min.css">
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>

    <title></title>
    <script type="text/javascript">
        $(document).ready(function () {
            //alert(`sdfsdfd`);
            $("#txtJMBG").keyup(function () {
                if ($("#txtJMBG").val() == ``) {
                    $("#txtJMBG").removeClass(`alert-danger`);
                }
                else if ($.isNumeric($("#txtJMBG").val())) {
                    $("#txtJMBG").removeClass(`alert-danger`);
                } else {
                    $("#txtJMBG").addClass(`alert-danger`);
                }
            });
            $("#txtEmail").keyup(function () {
                
                var email = new RegExp('^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$');
                
                if (!email.test($("#txtEmail").val())) {
                    $("#txtEmail").addClass(`alert-danger`);
                } else {
                    $("#txtEmail").removeClass(`alert-danger`);
                }
            });
            $("#btnRegister").click(function () {
                //alert(`prije promjenljivih`);
                var KorisnickoIme = $("#txtUsername").val();
                var Lozinka = $("#txtPassword").val();
                var Email = $("#txtEmail").val();
                var Jmbg = $("#txtJMBG").val();
                var KontaktTelefon = $("#txtTelefon").val();
                var Ime = $("#txtIme").val();
                var Prezime = $("#txtPrezime").val();
                var Pol = $("input:radio[name=pol]:checked").val();
                //alert(Pol);

                $.post("/api/Registracija", { KorisnickoIme: KorisnickoIme, Lozinka: Lozinka, Email: Email, Jmbg: Jmbg, KontaktTelefon: KontaktTelefon, Ime: Ime, Prezime: Prezime, Pol: Pol }, function (data) {

                })
                    .done(function () {
                        alert("uspjesno registrovano, sad se uloguj");
                        $("#upozorenje").removeClass(`alert-danger`);
                        $("#upozorenje").addClass(`hidden`);
                        location.href = "Login.html";
                    })
                    .fail(function () {
                        //alert("vec postoji korisnik sa datim korisnickim imenom");
                        $("#txtUsername").val(``);
                        $("#txtUsername").focus();
                        $("#upozorenje").removeClass(`hidden`);
                        $("#upozorenje").addClass(`alert-danger`);
                    });
            });
        });
    </script>
</head>
<body style="padding:200px 400px 200px 400px;">
    <table class="table table-bordered">
        <thead>
            <tr class="success">
                <th colspan="2">
                    Registracija                    
                </th>
            </tr>
        </thead>
        <tbody>
            <tr id="upozorenje" class="hidden">
                <td colspan="2"><strong>Greska!</strong>Vec postoji korisnik sa zadatim korisnickim imenom</td>
            </tr>
            <tr>
                <td>Korisnicko ime:</td>
                <td>
                    <input type="text" id="txtUsername" placeholder="Korisnicko ime..." />
                </td>
            </tr>
            <tr>
                <td>Sifra:</td>
                <td>
                    <input type="password" id="txtPassword"
                           placeholder="Sifra..." />
                </td>
            </tr>
            <tr>
                <td>Ime:</td>
                <td>
                    <input type="text" id="txtIme" pattern="^[A-Za-z]*$"
                           placeholder="Ime..." />
                </td>
            </tr>
            <tr>
                <td>Prezime:</td>
                <td>
                    <input type="text" id="txtPrezime"
                           placeholder="Prezime..." />
                </td>
            </tr>
            <tr>
                <td>Kontakt telefon:</td>
                <td>
                    <input type="text" id="txtTelefon"
                           placeholder="Broj telefona..." />
                </td>
            </tr>
            <tr>
                <td>JMBG:</td>
                <td>
                    <input type="text" id="txtJMBG"
                           placeholder="Maticni broj..." />
                </td>
            </tr>
            <tr>
                <td>Pol:</td>
                <td>
                    <input type="radio" name="pol" value="0"> Muski
                    <input type="radio" name="pol" value="1" checked="checked"> Zenski
                </td>
            </tr>
            <tr>
                <td>Email:</td>
                <td>
                    <input type="email" id="txtEmail" placeholder="Email..." />
                </td>
            </tr>
            <tr class="success">
                <td colspan="2">
                    <input id="btnRegister" class="btn btn-success" type="button"
                           value="Registruj se" />
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html>